language: php

php:
  - 5.4
  - 5.5

before_install:
  - sudo composer self-update

before_script:
  - composer update --dev
  - pyrus channel-discover pear.phpunit.de
  - pyrus install -f pear/PHP_CodeSniffer
  - git clone https://github.com/joomla/coding-standards.git `pear config-get php_dir`/PHP/CodeSniffer/Standards/Joomla
  - phpenv rehash

script:
  - ant composervalidate
  - ant phpcs
  - ant phpunit

after_script:
  - ant phpdoc

after_success:
  - utility/initiate-publish.sh

env:
  global:
    - secure: "aT8APLDd3qpC9QhrrYt6M/KfTspbuV+75KSQ9V49c6Ga5ErChKvvDlQ7JM0NhNA0NumW5I4A0u0a7QdwuW7xEkDmW0FAtlN0x5XWF2aqh73UalhBDSu2JkQphy2JOM6KX8E49UBRU7X+POdf0Zv2T3XMRIyTyohEIHYZtagTOZA="
